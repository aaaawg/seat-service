<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout/head :: head(~{::link})">
    <link th:href="@{/css/addUser.css}" href="../css/addUser.css" rel="stylesheet">
</head>
<body>
<div class="container" style="max-width: 450px">
    <div class="logo">
        <img src="/img/logo.png" th:onclick="|location.href='@{/}'|">
    </div>
    <div id="btnDiv">
        <button type="button" id="user" class="rounded-top activeUserTypeBtn" onclick="changeText(id)"><i class="bi bi-person"></i>개인</button>
        <button type="button" id="biz" class="rounded-top" onclick="changeText(id)"><i class="bi bi-building"></i>기업</button>
    </div>
    <div id="formDiv" class="rounded-bottom">
        <h4 id="userType">개인 회원가입</h4>
        <form th:action method="post" th:object="${user}" id="joinForm">
            <div class="dInput">
                <label for="userId" class="form-label">아이디</label>
                <div class="input-group" id="idDiv">
                    <input class="form-control" type="text" id="userId" th:field="*{userId}" th:errorclass="errorInput">
                    <a class="btn text-white" onclick="checkId()" id="checkIdBtn">중복확인</a>
                </div>
                <div id="idMessage">
                    <p class="errorText" th:errors="*{userId}"></p>
                </div>
            </div>
            <div class="dInput">
                <label for="password" class="form-label">비밀번호</label>
                <input type="password" id="password" class="form-control" autocomplete="off" th:field="*{password}" th:errorclass="errorInput">
                <div class="errorText" th:errors="*{password}"></div>
            </div>
            <div class="dInput">
                <label id="n" for="name" class="form-label">이름</label>
                <input class="form-control" type="text" id="name" name="name" th:field="*{name}" th:errorclass="errorInput">
                <div class="errorText" th:errors="*{name}"></div>
            </div>
            <div class="dInput">
                <label id="a" for="addr1" class="form-label">주소</label>
                <div class="input-group" style="margin-bottom: 10px">
                    <input type="text" class="form-control" id="addr1" readonly placeholder="주소" th:field="*{addr1}" th:classappend="${#fields.hasErrors('addr1')}?'errorInput':''">
                    <a class="btn text-white" id="searchAddr" onclick="findAddress()">검색</a>
                </div>
                <input type="text" class="form-control" id="addr2" placeholder="상세주소" th:field="*{addr2}" th:classappend="${#fields.hasErrors('addr1')}?'errorInput':''">
                <input type="hidden" th:field="*{address}">
                <div class="errorText" th:errors="*{addr1}"></div>
            </div>
            <div class="dInput">
                <label id="p" for="phone1" class="form-label">휴대폰번호</label>
                <div class="input-group">
                    <input class="form-control" type="text" id="phone1" oninput="checkNumber(id)" maxlength="3" th:field="*{phone1}" th:classappend="${#fields.hasErrors('phone')}?'errorInput':''">
                    <span class="input-group-text" th:classappend="${#fields.hasErrors('phone')}?'errorInput':''">-</span>
                    <input class="form-control" type="text" id="phone2" oninput="checkNumber(id)" maxlength="4" th:field="*{phone2}" th:classappend="${#fields.hasErrors('phone')}?'errorInput':''">
                    <span class="input-group-text" th:classappend="${#fields.hasErrors('phone')}?'errorInput':''">-</span>
                    <input class="form-control" type="text" id="phone3" oninput="checkNumber(id)" maxlength="4" th:field="*{phone3}" th:classappend="${#fields.hasErrors('phone')}?'errorInput':''">
                </div>
                <input type="hidden" id="phone" name="phone" th:field="*{phone}">
                <div class="errorText" th:errors="*{phone}"></div>
            </div>
            <div class="dInput">
                <label for="email1" class="form-label">이메일</label>
                <div class="input-group">
                    <input class="form-control" type="text" id="email1" th:field="*{email1}" th:classappend="${#fields.hasErrors('email')}?'errorInput':''">
                    <span class="input-group-text" th:classappend="${#fields.hasErrors('email')}?'errorInput':''">@</span>
                    <input class="form-control" type="text" id="email2" th:field="*{email2}" th:classappend="${#fields.hasErrors('email')}?'errorInput':''">
                    <a class="btn text-white" id="check" onclick="sendEmail()">인증</a>
                </div>
                <input type="hidden" id="email" name="email" th:field="*{email}">
                <div class="errorText" th:errors="*{email}"></div>
                <p id="sendEmailMessage"></p>
            </div>
            <div class="dInput" id="birthInput">
                <label for="birth" class="form-label">생년월일(8자)</label>
                <div>
                    <input class="form-control bir" id="birth" type="text" oninput="checkNumber(id)" placeholder="YYYYMMDD" maxlength="8" th:field="*{birth}" th:errorclass="errorInput">
                    <div class="errorText" th:errors="*{birth}"></div>
                </div>
            </div>
            <input type="hidden" id="role" name="role" value="user">
            <button type="button" class="btn text-white" style="width: 100%; height: 50px;" onclick="userEnterData()">가입하기</button>
        </form>
    </div>


    <!--이메일 인증-->
    <div class="modal fade" id="enterNumberModal" tabindex="-1" aria-labelledby="enterNumberModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="enterNumberModalLabel">이메일 인증</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="input-group">
                        <input class="form-control" type="text" id="enterNum" placeholder="인증번호 입력" oninput="checkNumber(id)">
                        <button type="button" class="btn text-white" onclick="checkAuthNum()">확인</button>
                    </div>
                    <p id="checkResult"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn text-white" data-bs-dismiss="modal">취소</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/js/addUser.js"></script>
<script th:inline="javascript">
    const role = [[${userRole}]];
</script>
</body>
</html>