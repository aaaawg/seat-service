<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout/head :: head(~{::link})">
  <link th:href="@{/css/userBookingDetail.css}" href="../css/userBookingDetail.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
</head>
<body>
<div th:replace="/layout/nav.html :: nav"></div>
<div class="container" style="max-width: 800px">
  <h3>세부 정보</h3>
  <div>
    <p>프로그램 정보</p>
    <div class="iDiv pInfoDiv">
      <div class="imgDiv sDiv">
        <img th:if="${detail.filename != null}" th:src="@{'/files/' + ${detail.filename}}">
        <div class="noImg" th:unless="${detail.filename != null}"><i class="bi bi-image"></i></div>
      </div>
      <div class="textDiv sDiv">
        <h5 th:text="${detail.title}"></h5>
        <span th:text="${detail.place}"></span>
      </div>
    </div>
  </div>
  <div>
    <p>신청 정보</p>
    <div class="iDiv">
      <span>신청번호</span>
      <span>신청일</span>
      <span></span>
      <div th:if="${detail.reason != null}">취소사유</div>
    </div>
  </div>

  <div th:if="${detail.way != null}">
    <p>참여 방법</p>
    <div class="iDiv">
      <div th:if="${detail.viewingDate} == ${#dates.format(#dates.createToday(), 'yyyy-MM-dd')}">
      </div>
    </div>
  </div>
</div>
<script>



</script>
<script>
  document.getElementById('deleteProgram').addEventListener('click', function() {
  var jbResult = confirm('취소하시겠습니까?');
  if (jbResult) {
    var bookingNum = this.getAttribute('data-bookingNum');
    var url = '/myPage/' + bookingNum;  // 변경되어야 할 경로

    // 서버에 HTTP 요청 보내기
    var xhr = new XMLHttpRequest();
    xhr.open('POST', url);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.onreadystatechange = function() {
      if (xhr.readyState === 4 && xhr.status === 200) {
        alert('신청이 취소되었습니다.');
        location.replace('/myPage');
      }
    };
    xhr.send();
  }
});
</script>
<script type="text/javascript" src="/js/nav.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>
</html>