<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link th:href="@{/css/bootstrap.min.css}"
          href="../css/bootstrap.min.css" rel="stylesheet">
    <link th:href="@{/css/updateForm.css}" href="../css/updateForm.css?ver=1.1" rel="stylesheet">
</head>
<body>
<div>
    <form th:action method="post" enctype="multipart/form-data" id="myFormEdit">
        <div id="formContent">
        </div>
        <button type="button" class="btn btn-plus" onclick='addContent()'>항목추가</button>
        <button type="submit" class="button button--shikoba button--text-medium button--round-l button--inverted"><span>수정완료</span></button>
    </form>
</div>
<script th:inline="javascript">
    var programInfo = /*[[${ProgramForm}]]*/ {};
    var div = document.getElementById('formContent');

    console.log("test: "+programInfo);
    if(programInfo === null || programInfo === "null"){
        const contentDiv = document.createElement('div');
        contentDiv.setAttribute("id","content");
        div.appendChild(contentDiv);
    }else{
        div.innerHTML = programInfo;
    }

    const select = document.querySelectorAll("select");
    let countSelect = document.querySelectorAll("select").length;

    for(let i=0; i<countSelect; i++){
        const selectP = document.getElementById('select'+i);
        const divContent = selectP.innerHTML;
        const match = divContent.match(/\d+/);
        const selectPp = document.getElementsByName('content'+i)[0];
        if(match===0){selectPp.selectedIndex = 0;}
        else if(match===1){selectPp.selectedIndex = 1;}
        else if(match===2){selectPp.selectedIndex = 2;}
        else if(match===3){selectPp.selectedIndex = 3;}
    }

    //Json 가져와보기
    var programJson = /*[[${ProgramJson}]]*/ {};
    if(programJson !== null){
        let reJson = JSON.parse(programJson);
        console.log(Object.keys(reJson).length);
    }

</script>
<script type="text/javascript" src="/js/addProgramContent.js?ver=4.3"></script>
</body>
</html>