<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout/head :: head(~{::link})">
    <link th:href="@{/css/programList.css}" href="../css/programList.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
</head>
<body>
<div th:replace="/layout/nav.html :: nav"></div>
<div class="container" style="max-width: 800px">
    <br>
    <div id="searchText" style="clear: both"></div>
    <hr>
    <th:block th:each="program: ${list}">
        <div class="row" th:onclick="|location.href='@{/program/{programNum}(programNum=${program.programNum})}'|">
            <div class="col-3 imgDiv" style="width: 150px; margin-left: 12px">
                <img class="rounded-3" th:if="${program.filename != null}" th:src="@{'/files/' + ${program.filename}}" style="width: 100%; height: 200px">
                <div class="noImg rounded-3" style="height: 200px;" th:unless="${program.filename != null}"><i class="bi bi-image" style="line-height: 200px; font-size: 2rem;"></i></div>
            </div>
            <div class="col textDiv" style="margin-left: 10px">
                <div>
                    <span class="badge bg-secondary" th:text="(${program.type} == 'offline')?'대면':'비대면'"></span>
                    <span class="badge bg-secondary" th:if="${#dates.createToday().before(program.startDate)}">예정</span>
                    <span class="badge bg-secondary" th:if="${#dates.createToday().after(program.endDate)}">마감</span>
                    <span class="badge bg-secondary" th:if="${#dates.createToday().compareTo(program.startDate) >= 0} and ${program.endDate.compareTo(#dates.createToday()) >= 0}">진행</span>
                </div>
                <p th:text="${program.title}"></p>
                <p th:text="${#dates.format(program.startDate,'yyyy.MM.dd')} + ' ~ ' + ${#dates.format(program.endDate, 'yyyy.MM.dd')}"></p>
                <p th:text="${program.place}"></p>
            </div>
        </div>
        <hr>
    </th:block>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/nav.js"></script>
<script>
    window.addEventListener("load", function () {
        const params = new URLSearchParams(location.search);
        const keyword = params.get("keyword");

        document.getElementById("searchText").innerHTML = "<h4><b>" + keyword + "</b> 검색결과</h4>";
    })
</script>
</body>
</html>