<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>예약 현황</title>
    <link th:href="@{/css/bootstrap.min.css}"
          href="../css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container" style="max-width: 800px">
    <table class="table" id="tb">
        <thead>
        <tr>
            <th>날짜</th>
            <th>시간</th>
            <th>신청인원</th>
            <th>신청자</th>
        </tr>
        </thead>
        <tbody>

        <tr th:each="program : ${programs}" >
            <td th:text="${program.viewingDate}"></td>
            <td th:text="${program.viewingTime}"></td>
            <td th:text="${program.peopleNum}"></td>
            <td><button id="btn" onclick="showBookingUser(this)">보기</button></td>
        </tr>
        </tbody>
    </table>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
<script th:inline="javascript">
    function showBookingUser(e) {
        let rowIndex = e.parentNode.parentNode.rowIndex;
        let date = document.getElementById("tb").rows[rowIndex].cells[0].innerHTML;
        let time = document.getElementById("tb").rows[rowIndex].cells[1].innerHTML;
        const programNum = [[${programNum}]];

        location.href = `/business/program/${programNum}/booking?date=${date}&time=${time}`;
    }
</script>
</body>
</html>
